"use strict";jQuery(function(n){$lis=n("#login_in .login_in ul li"),$lis.eq(0).css("color","#FF4400"),$lis.click(function(){$lis.css("color",""),n(".login_in .login_in_show").css("display","none"),n(this).css("color","#FF4400"),n(".login_in .login_in_show").eq(n(this).index()).css("display","block")});document.querySelector("#login_btn");var l=document.querySelector(".login_verification_code"),o=document.querySelector(".login_in_random_code");c(),o.addEventListener("click",function(){c()}),$login_username=n("#login_username"),$login_psw=n("#login_psw"),$login_btn=n("#login_btn"),$login_output=n("#login_output");var e=!1,s=!1,r=!1;function c(){o.innerHTML="<em><del>"+verificationCode()+"</del></em>",o.style.backgroundColor=randomColor("rgb")}n("#login_checkbox").on("click",function(){n("#login_checkbox").prop("checked")?(r=!0,console.log("已经选中",r)):(r=!1,console.log("取消选中",r))}),$login_btn.click(function(){if($_login_username=$login_username.val(),$_login_psw=$login_psw.val(),$_login_username.trim()){var o=verification.Tel($_login_username),i=verification.Nickname($_login_username);o||i?(e=!0,$_login_psw.trim()?(s=!0,l.style.display="block",e&&s?$login_btn.click(function(){if(s=e=!1,n("#login_verification_code").val().trim())if(n("#login_verification_code").val().toLowerCase()==n(".login_in_random_code em del").html().toLowerCase()){var o=24;r&&(o=168),n.ajax({url:"../api/xiaomi_login&register.php",type:"post",data:{a:"login",username:n("#login_username").val(),loginpsw:n("#login_psw").val(),loginavoid:o},async:!0,success:function(o){$res=n.parseJSON(o),console.log(123,$res),1==$res.code?(n("#login_username").css("border-color",""),n("#login_psw").css("border-color",""),n("#login_output").html($res.login_status),n("#login_output").css({display:"block",color:"green"}),Cookie.getCookie("cartaddr")?(location.href=Cookie.getCookie("cartaddr"),console.log(Cookie.getCookie("cartaddr")),Cookie.removeCookie("cartaddr")):location.href="../xiaomiindex.html"):2==$res.code?(n("#login_username").css("border-color","red"),n("#login_psw").css("border-color","red"),n("#login_output").html($res.message),n("#login_output").css({display:"block",color:"red"})):0==$res.code&&(n("#login_username").css("border-color","red"),n("#login_psw").css("border-color","red"),n("#login_output").css({display:"block",color:"red","border-color":"red"}),n("#login_output").html($res.message))},error:function(o){console.log(o)}})}else $_login_username.trim()&&$_login_psw.trim()&&(n("input").css("border-color",""),$login_output.css("display","block"),n("#login_output span").html("验证码不正确"),n("#login_verification_code").css("border-color","#EF5B00"),c());else $_login_username.trim()&&$_login_psw.trim()&&!e&&!s&&($login_output.css("display","block"),n("input").css("border-color",""),n("#login_output span").html("请输入验证码"),n("#login_verification_code").css("border-color","#EF5B00"))}):console.log("进不去")):(e=!1,n("input").css("border-color",""),$login_output.css({display:"block","margin-top":"15px"}),n("#login_output span").html("请输入密码"),$login_psw.css("border-color","#EF5B00"))):o&&i||(n("input").css("border-color",""),$login_output.css({display:"block","margin-top":"15px"}),n("#login_output span").html("用户名不正确"),$login_username.css("border-color","#EF5B00"))}else s=!1,n("input").css("border-color",""),$login_output.css({display:"block","margin-top":"15px"}),n("#login_output span").html("请输入账号"),$login_username.css("border-color","#EF5B00")}),n("#login_verification_code").on("input",function(){n("#login_verification_code").css("border-color",""),$login_output.css("display","none")}),n(".login_box").on("input",function(){$login_output.css("display","none"),n(this).css("border-color","")})});