"use strict";jQuery(function(r){function s(){r(".register_random_code").html("<em><del>"+verificationCode()+"</del></em>"),r(".register_random_code").css("background-color",randomColor("rgb"))}s(),r(".change_verification_code").click(function(){s()});var t=!1,i=!1,o=!1,g=!1,n=!1;r("#register_tel").blur(function(){$tel=r("#register_tel").val(),$res=verification.Tel($tel),$tel.trim()?$res?(r("#register_tel").next().children(".register_judge").html(""),r("#register_tel").css("color",""),r("#register_tel").css("border-color",""),r.ajax({url:"../api/xiaomi_login&register.php",type:"post",data:{a:"judgeTel",tel:r("#register_tel").val()},async:!0,success:function(e){$res=r.parseJSON(e),1==$res.code?(r("#register_tel").next().children(".register_judge").html($res.message),r("#register_tel").next().children(".register_judge").css("color","green"),r("#register_tel").css("border-color",""),r("#register_tel").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat 0 -50px'),t=!0,console.log("isok_tel",t)):0==$res.code&&(r("#register_tel").next().children(".register_judge").html($res.message),r("#register_tel").css("border-color","red"),r("#register_tel").next().children(".register_judge").css("color","red"),r("#register_tel").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),t=!1)},error:function(e){console.log(e)}})):(r("#register_tel").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),r("#register_tel").next().children(".register_judge").html("手机号格式有误"),r("#register_tel").css("border-color","red"),r("#register_tel").next().children(".register_judge").css("color","red"),t=!1):(r("#register_tel").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -270px 0'),r("#register_tel").next().children(".register_judge").html("手机号不能为空"),r("#register_tel").next().children(".register_judge").css("color","red"),r("#register_tel").css("border-color","red"),t=!1)}),r("#register_psw").blur(function(){$psw=r("#register_psw").val(),$res=verification.psw($psw),$psw.trim()?6<=$psw.length?(r("#register_psw").next().children(".register_judge").html(""),r("#register_psw").css("color",""),r("#register_psw").css("border-color",""),i=!0,r("#register_psw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat 0 -50px'),console.log("isok_psw",i)):(r("#register_psw").next().children(".register_judge").html("密码长度要大于6位"),r("#register_psw").next().children(".register_judge").css("color","red"),r("#register_psw").css("border-color","red"),r("#register_psw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),i=!1):(r("#register_psw").next().children(".register_judge").html("密码不能为空"),r("#register_psw").next().children(".register_judge").css("color","red"),r("#register_repsw").next().children(".register_judge").html(""),r("#register_psw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),r("#register_psw").css("border-color","red"),i=!1),r("#register_repsw").val()&&r("#register_psw").val()&&(r("#register_repsw").val()==r("#register_psw").val()?(r("#register_repsw").css("border-color",""),r("#register_psw").css("border-color",""),r("#register_repsw").next().children(".register_judge").html("验证通过"),r("#register_repsw").next().children(".register_judge").css("color","green"),r("#register_repsw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat  0 -50px'),o=i=!0):r("#register_repsw").val()!=r("#register_psw").val()&&(r("#register_repsw").css("border-color","red"),r("#register_psw").css("border-color","red"),r("#register_repsw").next().children(".register_judge").html("两个密码不符"),r("#register_psw").next().children(".register_judge").html("两个密码不符"),r("#register_psw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),r("#register_repsw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),r("#register_psw").next().children(".register_judge").css("color","red"),r("#register_repsw").next().children(".register_judge").css("color","red"),o=i=!1))}),r("#register_repsw").blur(function(){$psw=r("#register_psw").val(),$repsw=r("#register_repsw").val(),$repsw.trim()?$psw==$repsw?(r("#register_repsw").next().children(".register_judge").html("验证通过"),r("#register_psw").next().children(".register_judge").html(""),r("#register_repsw").css("border-color",""),r("#register_psw").css("border-color",""),r("#register_repsw").next().children(".register_judge").css("color","green"),r("#register_repsw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat 0 -50px'),o=!0,console.log("isok_repsw",o)):(r("#register_psw").next().children(".register_judge").html("两个密码不符"),r("#register_repsw").next().children(".register_judge").html("两个密码不符"),r("#register_psw").css("border-color","red"),r("#register_repsw").css("border-color","red"),r("#register_psw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),r("#register_repsw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),r("#register_psw").next().children(".register_judge").css("color","red"),r("#register_repsw").next().children(".register_judge").css("color","red"),o=!1):(r("#register_repsw").next().children(".register_judge").html("密码不能为空"),r("#register_repsw").next().children(".register_judge").css("color","red"),r("#register_repsw").css("border-color","red"),r("#register_repsw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -270px 0'),o=!1)}),r("#register_uname").blur(function(){$uname=r("#register_uname").val(),$res=verification.Nickname($uname),$uname.trim()?$res?(r("#register_uname").css("border-color",""),r("#register_uname").next().children(".register_judge").html(""),r.ajax({url:"../api/xiaomi_login&register.php",type:"post",data:{a:"judgeuname",registeruname:$uname},async:!0,success:function(e){$res=r.parseJSON(e),1==$res.code?(r("#register_uname").next().children(".register_judge").html($res.message),r("#register_uname").css("border-color",""),r("#register_uname").next().children(".register_judge").css("color","green"),g=!0,console.log("isok_uname",g),r("#register_uname").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat 0 -50px ')):0==$res.code&&(r("#register_uname").next().children(".register_judge").html($res.message),r("#register_uname").css("border-color","red"),r("#register_uname").next().children(".register_judge").css("color","red"),r("#register_uname").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),g=!1)},error:function(e){console.log(e)}})):(r("#register_uname").next().children(".register_judge").html("用户名格式有误"),r("#register_uname").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),r("#register_uname").next().children(".register_judge").css("color","red"),r("#register_uname").css("border-color","red"),g=!1):(r("#register_uname").next().children(".register_judge").html("用户名不能为空"),r("#register_uname").next().children(".register_judge").css("color","red"),r("#register_uname").css("border-color","red"),r("#register_uname").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -270px 0'),g=!1)}),r(".register_code").blur(function(){r(".register_code").val().trim()?(r(".register_code").css("border-color",""),r(".verification_code").css("margin-bottom",""),r("#register_output").html("")):(r(".verification_code").css("margin-bottom","0"),r(".register_code").css("border-color","red"),r("#register_output").css({display:"block",color:"red"}),r("#register_output").html("验证码不能为空"))}),r("#register_btn").click(function(){return r("#register_output").css("display","none"),r("#register_tel").val()?r("#register_psw").val()?r("#register_repsw").val()?r("#register_uname").val()?(r(".register_code").val().trim()?r(".register_code").val().toLowerCase()==r(".register_random_code em del").html().toLowerCase()?(r(".verification_code").css("margin-bottom","0"),r(".register_code").css("border-color",""),r("#register_output").css({display:"block",color:"green"}),r("#register_output").html("验证码通过"),n=!0):(r(".verification_code").css("margin-bottom","0"),r("#register_output").css({display:"block",color:"red"}),r("#register_output").html("验证码有误,请重新输入"),r(".register_code").css("border-color","red"),n=!1,s()):(r(".verification_code").css("margin-bottom","0"),r("#register_output").css("display","block"),r("#register_output").html("验证码不能为空"),r(".register_code").css("border-color","red"),n=!1),$retel=r("#register_tel").val(),$reuname=r("#register_uname").val(),$retel&&r.ajax({url:"../api/xiaomi_login&register.php",type:"post",data:{a:"rejudge1",retel:$retel},async:!0,success:function(e){$res=r.parseJSON(e),console.log($res),1==$res.code?(r("#register_tel").css("border-color",""),r("#register_tel").next().children(".register_judge").css("color","green"),r("#register_tel").next().children(".register_judge").html($res.message),r("#register_tel").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat 0 -50px '),g=o=i=t=!0):0==$res.code&&(r("#register_tel").css("border-color","red"),r("#register_tel").next().children(".register_judge").css("color","red"),r("#register_tel").next().children(".register_judge").html($res.message),r("#register_tel").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),t=!1,s())},error:function(e){console.log(e)}}),$reuname&&r.ajax({url:"../api/xiaomi_login&register.php",type:"post",data:{a:"rejudge2",reuname:$reuname},async:!0,success:function(e){$res=r.parseJSON(e),1==$res.code?(r("#register_uname").css("border-color",""),r("#register_uname").next().children(".register_judge").css("color","green"),r("#register_uname").next().children(".register_judge").html($res.message),r("#register_uname").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat  0 -50px'),g=o=i=t=!0):0==$res.code&&(r("#register_uname").css("border-color","red"),r("#register_uname").next().children(".register_judge").css("color","red"),r("#register_uname").next().children(".register_judge").html($res.message),r("#register_uname").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -450px 0'),g=!1,s())},error:function(e){console.log(e)}}),c||alert("请勾上协议"),void(t&&i&&o&&g&&n&&c&&(console.log("ajax进行插入"),r.ajax({url:"../api/xiaomi_login&register.php",type:"post",data:{a:"registersuccess",officalpsw:r("#register_psw").val(),officaltel:r("#register_tel").val(),officaluname:r("#register_uname").val()},async:!0,success:function(e){console.log(e),n=g=o=i=t=!1,location.href="../xiaomiindex.html"},error:function(e){console.log(e)}})))):(r("#register_uname").next().children(".register_judge").html("用户名不能为空"),r("#register_uname").css("border-color","red"),r("#register_uname").next().children(".register_judge").css("color","red"),r("#register_uname").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -270px 0'),void(g=!1)):(r("#register_repsw").next().children(".register_judge").html("密码不能为空"),r("#register_repsw").next().children(".register_judge").css("color","red"),r("#register_repsw").css("border-color","red"),r("#register_repsw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -270px 0'),void(o=!1)):(r("#register_psw").next().children(".register_judge").html("密码不能为空"),r("#register_psw").next().children(".register_judge").css("color","red"),r("#register_psw").css("border-color","red"),r("#register_psw").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -270px 0'),void(i=!1)):(r("#register_tel").next().children(".register_judge").html("手机号不能为空"),r("#register_tel").next().children(".register_judge").css("color","red"),r("#register_tel").css("border-color","red"),r("#register_tel").next().children("i").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -270px 0'),void(t=!1))});var e=!0,c=!1;r(".register_check").click(function(){e?(r(".register_check").css("background",'url("../img/xiaomi_sprite_sheet.png") no-repeat -420px 0'),c=!(e=!1),console.log("istrue2的状态:勾上",c)):(r(".register_check").css("background",""),c=!(e=!0),console.log("istrue2的状态:没勾上",c))});var l=document.getElementById("register_psw"),d=document.getElementsByClassName("psw_describe")[0],_=document.getElementsByClassName("register_only")[0],a=document.getElementById("psw_inner_progess"),p=document.getElementsByClassName("psw_progess")[0],u=[];u.push(/[^a-zA-Z0-9_]/g),u.push(/[a-zA-Z]/g),u.push(/[0-9]/g),l.onkeyup=function(){var e=this.value,r=e.length,s=0;if(6<=r){p.style.display="block",_.style.top="215px";for(var t=0;t<u.length;t++)e.match(u[t])&&s++}else r<6&&(p.style.display="none");console.log(s);var i=s/u.length*100;0<i&&i<=50?(a.setAttribute("class","error"),a.class="error",d.style.left="110px",d.innerHTML="密码强度:小"):50<i&&i<100?(a.setAttribute("class","middle"),d.style.left="215px",a.class="middle",d.innerHTML="密码强度:中"):100==i&&(a.setAttribute("class","strong"),d.style.left="320px",a.class="strong",d.innerHTML="密码强度:强")}});